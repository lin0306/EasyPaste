<script setup lang="ts">import VersionIcon from "../icons/VersionIcon.vue";import {  clearSelectPlugin,  hasUpdate,  install,  isInstall,  loadingSet,  selectedPlugin,  tabValue,  togglePluginEnable,  uninstall,  update} from "../composables/PluginComponsables.ts";import {useMessage} from "naive-ui";import {currentLanguage} from "../../../services/LanguageService.ts";const message = useMessage();async function onUninstall() {  await uninstall(selectedPlugin.plugin_id, message);  clearSelectPlugin();}</script><template>  <div class="plugin-detail" v-if="selectedPlugin && selectedPlugin.id">    <div class="plugin-detail-main">      <div class="plugin-detail-main-left">        <div class="plugin-detail-main-title">          <div class="plugin-detail-main-name">            {{ selectedPlugin.plugin_name }}          </div>          <div class="plugin-detail-main-platform">            {{              selectedPlugin.platform === 'General' ? currentLanguage.pages.pluginStore.pluginPlatformGeneral : (selectedPlugin.platform === 'Windows' ? currentLanguage.pages.pluginStore.pluginPlatformWindows : currentLanguage.pages.pluginStore.pluginPlatformMac)            }}          </div>        </div>        <div class="plugin-detail-main-version">          <version-icon class="plugin-detail-main-version-icon"/>          {{ selectedPlugin.version }}        </div>      </div>      <div class="plugin-detail-main-right">        <n-spin size="small" v-if="loadingSet.has(selectedPlugin.plugin_id)"/>        <n-button            round            type="primary"            size="small"            v-if="!loadingSet.has(selectedPlugin.plugin_id) && hasUpdate(selectedPlugin.plugin_id)"            @click="update(selectedPlugin.plugin_id, message)"        >          {{ currentLanguage.pages.pluginStore.updateBtn }}        </n-button>        <n-button            round            ghost            size="small"            v-if="!loadingSet.has(selectedPlugin.plugin_id) && tabValue=== 'store' && !isInstall(selectedPlugin.plugin_id)"            @click="install(selectedPlugin.plugin_id, message)"        >          {{ currentLanguage.pages.pluginStore.installBtn }}        </n-button>        <n-button            round            type="error"            size="small"            v-if="!loadingSet.has(selectedPlugin.plugin_id) && isInstall(selectedPlugin.plugin_id) && !hasUpdate(selectedPlugin.plugin_id)"            @click="onUninstall()"        >          {{ currentLanguage.pages.pluginStore.unInstallBtn }}        </n-button>        <n-button            round            size="small"            v-if="!loadingSet.has(selectedPlugin.plugin_id) && isInstall(selectedPlugin.plugin_id) && !hasUpdate(selectedPlugin.plugin_id) && selectedPlugin.enable === 1"            @click="togglePluginEnable(selectedPlugin.plugin_id, false)"        >          {{ currentLanguage.pages.pluginStore.disableBtn }}        </n-button>        <n-button            round            size="small"            v-if="!loadingSet.has(selectedPlugin.plugin_id) && isInstall(selectedPlugin.plugin_id) && !hasUpdate(selectedPlugin.plugin_id) && selectedPlugin.enable === 0"            @click="togglePluginEnable(selectedPlugin.plugin_id, true)"        >          {{ currentLanguage.pages.pluginStore.enableBtn }}        </n-button>      </div>    </div>    <div class="plugin-detail-description">{{ selectedPlugin.description }}</div>  </div>  <div class="plugin-detail not-select-plugin" v-else>{{ currentLanguage.pages.pluginStore.detailNoPluginHint }}</div></template><style scoped>.plugin-detail {  width: 50%;  height: 100%;}.not-select-plugin {  display: flex;  align-items: center;  justify-content: center;}.plugin-detail-main {  display: flex;  border-bottom: 1px solid var(--theme-universal-border);  padding: 8px;  height: 80px;}.plugin-detail-main-left {  width: 70%;  display: flex;  flex-direction: column;  justify-content: space-around;}.plugin-detail-main-title {  display: flex;  align-items: baseline;  gap: 5px;}.plugin-detail-main-name {  font-size: 26px;  font-weight: 700;}.plugin-detail-main-platform {  font-size: 12px;}.plugin-detail-main-version {  display: flex;  align-items: center;  gap: 5px;  font-size: 14px;}.plugin-detail-main-version-icon {  width: 16px;  height: 16px;}.plugin-detail-main-right {  width: 30%;  display: flex;  flex-direction: column;  justify-content: space-evenly;  align-items: stretch;}.plugin-detail-description {  padding: 8px;  font-size: 14px;}</style>