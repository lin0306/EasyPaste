import {reactive} from "vue";import {listen} from "@tauri-apps/api/event";import {error} from "@tauri-apps/plugin-log";import {getAnimationDuration, getEnableAnimationEffects} from "../../../store/Settings.ts";// 动画效果export const animationEffect = reactive({    enabled: true,    duration: 300,});/** * 初始化修改动画效果监听 */let updateAnimationEffectListener: any = null;async function initUpdateAnimationEffectListener() {    return await listen('update-animation-effect', async (event: any) => {        const enable = event.payload.isEnable;        const duration = event.payload.duration;        animationEffect.enabled = enable;        animationEffect.duration = duration;        // 设置动画持续时长        document.documentElement.style.setProperty('--animation-duration', animationEffect.duration + 'ms');    });}/** * 初始化动画效果配置 */export async function initializeAnimationEffect() {    try {        // 添加打开设置窗口事件监听        updateAnimationEffectListener = await initUpdateAnimationEffectListener();        // 初始化动画效果        animationEffect.enabled = await getEnableAnimationEffects();        animationEffect.duration = await getAnimationDuration();        // 设置动画持续时长        document.documentElement.style.setProperty('--animation-duration', animationEffect.duration + 'ms');    } catch (e) {        console.error("动画效果配置初始化失败", e);        error("动画效果配置初始化失败" + e);    }}/** * 销毁动画效果配置 */export function destroyAnimationEffect() {    // 清除打开设置窗口事件监听    if (updateAnimationEffectListener) {        updateAnimationEffectListener();    }}