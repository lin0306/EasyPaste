<template>  <div      v-if="tagSettingState.isShow"      class="tag-list"      :class="{ 'has-selected-tag': dragState.isDragging }"      @dragover.prevent      :style="{'flex-direction': tagSettingState.listLocation === SETTINGS.TAG.TAG_LIST_LOCATION.TOP_LEFT ? 'column' : 'column-reverse'}"  >    <transition-group name="tag">      <div          v-for="tag in TagItems"          :key="tag.id"          class="tag-item"          :class="{          'tag-dragging-over': dragState.draggedOverTagId === tag.id,          'tag-disabled': dragState.isDragging && isItemTagged(dragState.dragItem.id, tag.id),          'tag-expanded': dragState.isDragging && !isItemTagged(dragState.dragItem.id, tag.id),          'tag-selected': selectedTagState.selectedTagId === tag.id        }"          :style="{ backgroundColor: tag.color }"          @dragover.prevent          @dragenter="handleDragEnterTag(tag.id)"          @dragleave="handleDragLeaveTag($event)"          @drop="handleDropOnTag(tag)"          @click="handleTagClick(tag.id)"      >        <span class="tag-name" :style="{ color: getContrastColor(tag.color) }">{{ tag.name }}</span>      </div>      <div class="tag-item tag-manage" :style="{ backgroundColor: themeColors.universal.background }" @click="openTagsWindow">        <span class="tag-name tag-manage-name">          <TagManageIcon class="tag-manage-icon" />          <span class="tag-manage-text">            {{ currentLanguage.pages.list.tagManager}}          </span>        </span>      </div>    </transition-group>  </div></template><script setup lang="ts">import {getContrastColor} from '../../../utils/ContrastColorUtil.ts';import {handleTagClick, selectedTagState, TagItems, tagSettingState} from "../composables/TagDataComposable.ts";import {dragState, handleDragEnterTag, handleDragLeaveTag, handleDropOnTag} from "../composables/DragComposable.ts";import {isItemTagged} from "../composables/ClipboardDataComposable.ts";import {SETTINGS} from "../../../constants/UserSettingsConstant.ts";import {useTheme} from "../../../services/ThemeService.ts";import TagManageIcon from "../../../assets/icons/TagManageIcon.vue";import {openTagsWindow} from "../../../utils/WindowUtil.ts";import {useLanguage} from "../../../services/LanguageService.ts";const {themeColors} = useTheme();const {currentLanguage} = useLanguage();</script><style scoped>/* 标签列表样式 */.tag-list {  position: fixed;  top: 55px;  left: -16px;  display: flex;  flex-direction: column;  z-index: 100;  transition: left 0.3s ease;  overflow-y: auto;  overflow-x: hidden;  height: calc(100vh - 90px);  margin: auto auto;  padding-bottom: 5px;  padding-right: 5px;}.has-selected-tag {  width: 110px;}/* 隐藏 Chrome、Safari 和 Opera 的滚动条 */.tag-list::-webkit-scrollbar {  width: 0;}/* 拖拽激活时，标签列表稍微向右移动，增加可见性 */.tag-list.dragging-active {  left: -5px;}.tag-item {  width: 24px;  height: 30px;  border-radius: 4px;  margin-bottom: -4px;  position: relative;  cursor: pointer;  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);  transform-origin: left center;  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);  opacity: 0.2;}.tag-name {  position: absolute;  left: 20px;  top: 50%;  transform: translateY(-50%);  font-size: 12px;  opacity: 0;  transition: opacity 0.3s ease 0.15s;  /* 延迟显示文字，等待展开动画完成一半 */  pointer-events: none;  width: 70px;  transform-origin: left center;  overflow: hidden;  white-space: nowrap;  text-overflow: ellipsis;  word-break: break-all;}/* 鼠标悬停或拖拽时展开标签 */.tag-item:hover,.tag-item.tag-expanded {  opacity: 1;  /* 固定宽度而不是拉伸 */  width: 100px;  /* 悬浮时置于顶层 */  z-index: 10;}/* 鼠标悬停或拖拽时显示标签名称 */.tag-item:hover .tag-name,.tag-item.tag-expanded .tag-name {  opacity: 1;  transform: translateY(-50%);}/* 进入动画 - 从左侧进入 */.tag-enter-from {  opacity: 0;  transform: translateX(-100%);}.tag-enter-to {  opacity: 1;  transform: translateX(0);}/* 离开动画 - 向左侧离开 */.tag-leave-from {  opacity: 1;  transform: translateX(0);}.tag-leave-to {  opacity: 0;  transform: translateX(-100%);}/* 离开中 */.tag-leave-active {  position: absolute;  width: calc(100%); /* 考虑左右 margin */}.tag-dragging-over {  transform: scale(1.08);  z-index: 20 !important;}/* 选中标签的样式 */.tag-selected {  width: 100px !important;  z-index: 5 !important;  opacity: 0.6;}/* 选中标签的名称始终显示 */.tag-selected .tag-name {  opacity: 1;  font-weight: bold;}.tag-disabled {  opacity: 0;  /* 禁用鼠标光标样式 */  cursor: not-allowed !important;  /* 禁用点击事件 */  pointer-events: none !important;}.tag-disabled:hover {  width: 24px !important;  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;  transform: none !important;}.tag-disabled:hover .tag-name {  opacity: 0 !important;}.tag-manage {  margin-bottom: 10px !important;  margin-top: 10px !important;  opacity: 1 !important;  border: 1px solid var(--theme-universal-border);}.tag-manage-name {  display: flex;  align-items: center;  justify-content: center;}.tag-manage-icon {  width: 15px;  height: 15px;}.tag-manage-text {  margin-left: 3px;}</style>