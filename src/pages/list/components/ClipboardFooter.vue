<script setup lang="ts">import {clearAllData, scrollState, showClearDataModal} from "../composables/ClipboardDataComposable.ts";import ClearIcon from "../../../assets/icons/ClearIcon.vue";import {useMessage} from "naive-ui";import {currentLanguage} from "../../../services/LanguageService.ts";import {onMounted, onUnmounted, ref} from "vue";import {invoke} from "@tauri-apps/api/core";import {listen} from "@tauri-apps/api/event";const message = useMessage();const isListening = ref(true);/** * 点击清理数据按钮 */async function onClickClearData() {  await clearAllData(message);  showClearDataModal.value = false;}/** * 初始化更新数据是否监听状态监听 */let updateListeningStatusListener: any = null;function initUpdateListeningStatusListener() {  return listen('update-listening', async (event: any) => {    console.log(event.payload)    isListening.value = event.payload;  });}onMounted(async () => {  try {    isListening.value = await invoke<boolean>('is_listening');    updateListeningStatusListener = initUpdateListeningStatusListener();  } catch (e: any) {    console.log("列表底部数据加载失败", e);  }})onUnmounted(() => {  updateListeningStatusListener?.();})</script><template>  <!-- 底部展示 -->  <div class="footer">    <div class="footer-left">      <div class="listen-status">        <div class="point" :style="{'background-color': isListening ? 'lawngreen' : 'orangered'}"></div>        {{ isListening ? currentLanguage.pages.list.listening : currentLanguage.pages.list.stopListen }}      </div>    </div>    <div class="footer-right">      <!-- 数据统计 -->      <div class="stats-text">        {{ currentLanguage.pages.list.totalData.replace('{total}', scrollState.total.toString()) }}      </div>      <!-- 清理数据 -->      <clear-icon class="clear-icon" @click="showClearDataModal = true"/>    </div>  </div>  <!-- 清除全部数据二次确认弹窗 -->  <n-modal v-model:show="showClearDataModal" :title="currentLanguage.pages.list.clearDataModalTitle"           preset="dialog">    <p>{{ currentLanguage.pages.list.clearDataModalContent }}</p>    <template #action>      <n-button @click="showClearDataModal = false">        {{ currentLanguage.pages.list.clearDataModalCancelBtn }}      </n-button>      <n-button type="primary" @click="onClickClearData">        {{ currentLanguage.pages.list.clearDataModalConfirmBtn }}      </n-button>    </template>  </n-modal></template><style scoped>.footer {  z-index: 999;  width: 96%;  height: 16px;  position: fixed;  bottom: 0;  font-size: 11px;  padding: 4px 7px;  color: var(--theme-universal-textHint);  background-color: var(--theme-universal-background);  display: flex;  justify-content: space-between;  border-top: 1px solid var(--theme-universal-border);  border-radius: 6px;  box-shadow: 0 -1px 5px var(--theme-universal-border);}.footer-left {  width: 50%;  height: 100%;  display: flex;  align-items: center;  justify-content: flex-start;}.listen-status {  display: flex;  align-items: center;}.point {  width: 5px;  height: 5px;  border-radius: 5px;  margin: 0 4px;}.footer-right {  width: 50%;  height: 100%;  display: flex;  align-items: center;  justify-content: flex-end;  gap: 3px;}.clear-icon {  width: 15px;  height: 15px;  opacity: 0.5;  cursor: pointer;}.clear-icon:hover {  opacity: 0.8;}</style>