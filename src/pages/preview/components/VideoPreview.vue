<script setup lang="ts">import {computed, onMounted, onUnmounted, watch} from "vue";import "plyr/dist/plyr.css";import {convertFileSrc} from "@tauri-apps/api/core";import {getType} from "../../../utils/VideoUtil.ts";// @ts-ignore 这个是Plyr的构造方法import Plyr from "plyr";const props = defineProps<{  filePath: string,}>()const mineType = computed(() => {  return getType(props.filePath);});const plyrConfig = {  autoplay: false,  volume: 1,  ratio: '16:9',  preload: 'auto',  speed: {    selected: 1,    options: [0.5, 1, 1.5, 2, 3, 5]  },  fullscreen: {    enabled: true,    fallback: true,    iosNative: true,  },  captions: {    active: true,    update: false,    language: 'auto'  },  i18n: {    restart: '重播',    play: '播放',    pause: '暂停',    volume: '音量',    mute: '静音',    pip: '画中画',    normal: '默认',    quality: '画质',    download: '下载',    enterFullscreen: '全屏',    exitFullscreen: '关闭全屏',    captions: 'Captions',    settings: '设置',    speed: '倍速',    loop: '循环播放',  },}let player: any = null;watch(() => props.filePath, (newValue, _oldValue) => {  console.log("视频源被更新", newValue);  loadFileAndInitPlyr();})function loadFileAndInitPlyr() {  const video = document.getElementById("video-viewer");  if (video != null) {    // 清空原来的视频信息，重新设置播放视频，不然会出现文件信息变了，但是播放器没有更新    video.innerHTML = `  <video id="viewer-video" style="width: 100%">    <source src="${convertFileSrc(props.filePath)}" type="${mineType.value}">    您的浏览器不支持 video 标签。  </video>  `  }  if (player) {    console.log("销毁旧的Plyr实例")    // 销毁旧的Plyr实例    player.destroy();    // 获取更新后的视频元素    const video = document.getElementById("viewer-video");    if (video) {      // 重新初始化Plyr实例      player = new Plyr(video, plyrConfig);    }  } else {    // 获取视频元素    const video = document.getElementById("viewer-video");    // 初始化Plyr实例    if (video) {      player = new Plyr(video, plyrConfig);    }  }}onMounted(async () => {  loadFileAndInitPlyr();})onUnmounted(() => {  // 销毁Plyr实例  if (player) {    player.destroy();  }})</script><template>  <div id="video-viewer">  </div></template><style scoped></style>